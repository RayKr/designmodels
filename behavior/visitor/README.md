# 访问者模式

## UML类图
![visitor](../../../../../resources/images/visitor-uml.png)

## 定义
访问者模式是最复杂的行为型设计模式。

* **抽象访问者**： 抽象类或接口，内含visit()方法，其参数定义哪些对象可以访问。
* **访问者**： 实现抽象访问的visit()方法。
* **抽象元素类**： 接口或抽象类，声明接收哪一类访问者访问，使用accept()方法的参数来定义。
* **元素类**： 实现抽象元素类的accept方法，通常是`visitor.visit(this)`，基本上形成定式。
* **结构对象**： 一个元素的容器，一般包含一个容纳多个不同类、不同接口的容器，如List、Set、Map等。

## 理解
A（元素）接受B（访问者）的访问，B可以调用A的方法，执行A的业务方法。

## 优缺点
* **符合单一职责原则**：元素类中需要封装在访问者中的操作必定是与元素关系不大且易变的操作，符合单一职责原则。
* **扩展性良好**：元素类可接受不同的访问者来实现对不同操作的扩展。
* **致命缺陷**：增加新的元素类比较困难。